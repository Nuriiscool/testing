<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Все мета-теги и стили остаются БЕЗ ИЗМЕНЕНИЙ -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nuri | Social Links</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    /* ВСЕ СТИЛИ ОСТАЮТСЯ ПРЕЖНИМИ */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Segoe UI', sans-serif; color: white; background: linear-gradient(135deg, #0f2027, #203a43, #2c5364); }
    /* ... остальные стили без изменений ... */
  </style>
</head>
<body>
  <!-- ВЕСЬ КОНТЕНТ САЙТА ОСТАЕТСЯ ПРЕЖНИМ -->
  <div id="particles-js"></div>
  <div class="content">
    <!-- Ваш аватар, статус, соц-ссылки и кнопки БЕЗ ИЗМЕНЕНИЙ -->
  </div>

  <!-- АДМИН-ПАНЕЛЬ (ОБНОВЛЕННАЯ ЗАЩИТА) -->
  <div id="admin-overlay">
    <div id="admin-panel">
      <div id="admin-login">
        <h3>Admin Access</h3>
        <input type="password" id="admin-password" placeholder="Enter password">
        <button onclick="checkAdminPassword()">Continue</button>
        <button onclick="hideAdminPanel()" style="background: #e74c3c; margin-top: 10px;">Cancel</button>
      </div>
      <div id="admin-controls">
        <h3>Status Manager</h3>
        <select id="status-select">
          <option value="offline">Offline</option>
          <option value="online">Online</option>
        </select>
        <input type="text" id="status-custom-text" placeholder="What I'm doing..." maxlength="100">
        <button onclick="updateStatus()">Update Status</button>
        <button onclick="hideAdminPanel()" style="background: #e74c3c; margin-top: 10px;">Close Panel</button>
      </div>
    </div>
  </div>
  <div class="admin-hint">Press Ctrl+Alt+N or triple-click bottom-right</div>

  <!-- СКРИПТЫ -->
  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js"></script>
  <script>
    // ======================
    // НЕИЗМЕННЫЕ НАСТРОЙКИ FIREBASE
    // ======================
    const firebaseConfig = {
      apiKey: "AIzaSyBwjcK9brfOAwlkojOfYgMO_dFY-DNvEvQ",
      authDomain: "nuri-test-95cc5.firebaseapp.com",
      databaseURL: "https://nuri-test-95cc5-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "nuri-test-95cc5",
      storageBucket: "nuri-test-95cc5.appspot.com",
      messagingSenderId: "440508513511",
      appId: "1:440508513511:web:f85ed92675fd040aad3642"
    };
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // ======================
    // ОБНОВЛЕННАЯ ЗАЩИТА АДМИН-ПАНЕЛИ
    // ======================
    const ADMIN_PASSWORD = "nxriiscool"; // Пароль
    let failedAttempts = 0;
    const MAX_ATTEMPTS = 3;
    const BLOCK_TIME = 30000; // 30 сек блокировки

    function checkAdminPassword() {
      const password = document.getElementById('admin-password').value;
      
      if (password === ADMIN_PASSWORD) {
        failedAttempts = 0;
        document.getElementById('admin-login').style.display = 'none';
        document.getElementById('admin-controls').style.display = 'block';
        loadCurrentStatus();
      } else {
        failedAttempts++;
        if (failedAttempts >= MAX_ATTEMPTS) {
          alert(`Админ-панель заблокирована на ${BLOCK_TIME/1000} сек!`);
          setTimeout(() => failedAttempts = 0, BLOCK_TIME);
        } else {
          alert(`Неверный пароль! Осталось попыток: ${MAX_ATTEMPTS - failedAttempts}`);
        }
      }
    }

    // ======================
    // НЕИЗМЕННЫЕ ФУНКЦИИ
    // ======================
    function showAdminPanel() {
      document.getElementById('admin-overlay').style.display = 'flex';
      document.getElementById('admin-login').style.display = 'block';
      document.getElementById('admin-controls').style.display = 'none';
    }

    function hideAdminPanel() {
      document.getElementById('admin-overlay').style.display = 'none';
    }

    function loadCurrentStatus() {
      database.ref('status').once('value').then((snapshot) => {
        const status = snapshot.val() || {};
        document.getElementById('status-select').value = status.state || 'online';
        document.getElementById('status-custom-text').value = status.message || '';
      });
    }

    function updateStatus() {
      const status = document.getElementById('status-select').value;
      const text = document.getElementById('status-custom-text').value;
      
      if (text.length > 100) {
        alert("Сообщение слишком длинное (макс. 100 символов)");
        return;
      }

      database.ref('status').set({
        state: status,
        message: text,
        secretKey: "nxriiscool",
        timestamp: firebase.database.ServerValue.TIMESTAMP
      }).then(() => {
        alert("Статус обновлен!");
        hideAdminPanel();
      });
    }

    // Остальной код (loadStatus, updateUI, copyTelegram, particles.js) БЕЗ ИЗМЕНЕНИЙ
  </script>
</body>
</html>
